<main class="forecast" *ngIf="forecast$ | async as forecast; else loadingOrEmpty">
  <a class="back-link glass-chip" routerLink="/">Back to dashboard</a>

  <header class="glass-panel">
    <h1>{{ forecast.city }}, {{ forecast.country }}</h1>
    <p>Next 5 days weather outlook</p>
  </header>

  <section class="timeline-section">
    <h2>Next 5 Days</h2>
    <div class="forecast-grid">
      <article *ngFor="let item of forecast.days" class="forecast-card glass-panel">
        <h3>{{ formatDate(item.dateUtc) }}</h3>
        <p class="temp">{{ item.temperature | number: '1.0-1' }}&deg;{{ getUnitSymbol(forecast.units) }}</p>
        <p class="summary">{{ item.summary }}</p>
        <p>Feels like {{ item.feelsLike | number: '1.0-1' }}&deg;{{ getUnitSymbol(forecast.units) }}</p>
        <p>Humidity {{ item.humidity }}%</p>
        <p>Wind {{ item.windSpeed | number: '1.0-1' }} {{ getWindUnit(forecast.units) }}</p>
      </article>
      <p class="state-text" *ngIf="forecast.days.length === 0">No forecast data available.</p>
    </div>
  </section>
</main>

<ng-template #loadingOrEmpty>
  <main class="forecast">
    <a class="back-link glass-chip" routerLink="/">Back to dashboard</a>
    <p class="state-text" *ngIf="loading$ | async">Loading forecast...</p>
    <p class="error" *ngIf="!(loading$ | async) && (error$ | async) as error">{{ error }}</p>
    <p class="state-text" *ngIf="!(loading$ | async) && !(error$ | async)">No forecast data available for this location.</p>
  </main>
</ng-template>
